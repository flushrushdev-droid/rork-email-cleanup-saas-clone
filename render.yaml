# Render Blueprint Configuration for AthenXMail Backend
# 
# This file defines the services to deploy on Render.
# To deploy:
# 1. Push this file to your Git repository
# 2. Go to https://dashboard.render.com
# 3. Click "New" > "Blueprint"
# 4. Connect your Git repository
# 5. Render will automatically detect this file and create the services

services:
  # Backend API Service (Hono + tRPC)
  - type: web
    name: athenxmail-backend
    env: node
    plan: free  # Start with free tier, upgrade as needed
    rootDir: backend  # Only use the backend directory
    buildCommand: npm install && npm run build
    startCommand: npm start
    envVars:
      # Supabase Configuration (set these in Render dashboard)
      - key: SUPABASE_URL
        sync: false  # Set manually in Render dashboard
      - key: SUPABASE_ANON_KEY
        sync: false  # Set manually in Render dashboard
      - key: SUPABASE_SERVICE_ROLE_KEY
        sync: false  # Set manually in Render dashboard (keep secret!)
      # Google OAuth Configuration (set these in Render dashboard)
      - key: EXPO_PUBLIC_GOOGLE_CLIENT_ID
        sync: false  # Set manually in Render dashboard
      - key: EXPO_PUBLIC_GOOGLE_CLIENT_SECRET
        sync: false  # Set manually in Render dashboard (keep secret!)
      # Node Environment
      - key: NODE_ENV
        value: production
      # CORS Origins (update with your frontend URLs)
      - key: CORS_ORIGINS
        value: https://your-app.vercel.app,https://your-app.onrender.com
      # Port (Render sets this automatically, but good to have)
      - key: PORT
        value: 10000

